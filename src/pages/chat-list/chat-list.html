<!--
  Generated template for the ChatListPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <div class="menubtn-chat" >
    <img *ngIf="userData" src={{headerImage}} menuToggle style="float: left; background-color: white;">
    <div style="float: left; margin-top: 5px; margin-left: 15px; font-size: 20px; color: white;">Chats</div>
  </div>
</ion-header>
<ion-content>
  <ion-card class="alert-card" *ngFor="let chat of chatListArray" (click)="ChatPage(chat)">
    <ion-item>
      <ion-avatar class="ionAvatar" item-start>
        <img src="http://res.cloudinary.com/doo4zgtkg/image/upload/v{{chat.receiverId.picVersion}}/{{chat.receiverId.picId}}">
      </ion-avatar>
      <ion-grid>
        <ion-row>
          <ion-col col>
            <h5 ion-text class="sender">{{chat.receiverId.username}}</h5>
          </ion-col>

          <ion-col col-auto>
            <span class="postTime" margin-left ion-text>
              {{GetTime(chat.msgId.message[chat.msgId.message.length - 1].createdAt)}}
            </span>
          </ion-col>
        </ion-row>
      </ion-grid>

      <ion-grid class="msgGrid">
        <ion-row>
          <ion-col col>
            <span>
              <ion-icon name="done-all" class="read" *ngIf="chat.msgId.message[chat.msgId.message.length - 1].isRead"></ion-icon>
              {{chat.msgId.message[chat.msgId.message.length - 1].body.substr(0, 10)}}...
            </span>
          </ion-col>

          <ion-col col-auto>
            <p class="msg" *ngIf="CheckIfFalse(chat.msgId.message, chat.receiverId.username) > 0">
              {{CheckIfFalse(chat.msgId.message, chat.receiverId.username)}}
            </p>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-item>
  </ion-card>
</ion-content>